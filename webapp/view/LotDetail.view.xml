<mvc:View controllerName="com.kaar.quality.controller.LotDetail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core">
    <Page id="lotDetailPage" title="Lot Detail: {inspection>InspectionLot}" showNavButton="true" navButtonPress="onNavBack">
        <content>
            <ObjectHeader title="{inspection>MaterialDesc}" number="{inspection>LotQuantity}" numberUnit="{inspection>UoM}">
                <attributes>
                    <ObjectAttribute text="Lot ID: {inspection>InspectionLot}" />
                    <ObjectAttribute text="Material: {inspection>MaterialNumber}" />
                </attributes>
                <statuses>
                    <ObjectStatus text="{path: 'inspection>UsageDecisionCode', formatter: '.formatter.statusText'}" state="{path: 'inspection>UsageDecisionCode', formatter: '.formatter.statusState'}" />
                </statuses>
            </ObjectHeader>

            <f:SimpleForm title="Result Records" editable="true" layout="ResponsiveGridLayout">
                <f:content>
                    <Label text="Unrestricted Stock" />
                    <Input id="unrestricted" value="{localModel>/unrestricted}" type="Number" editable="{localModel>/isEditable}" change="onLiveChange" />
                    <Label text="Block Stock" />
                    <Input id="block" value="{localModel>/block}" type="Number" editable="{localModel>/isEditable}" change="onLiveChange" />
                    <Label text="Production Stock" />
                    <Input id="production" value="{localModel>/production}" type="Number" editable="{localModel>/isEditable}" change="onLiveChange" />
                </f:content>
            </f:SimpleForm>

            <f:SimpleForm title="Usage Decision" layout="ResponsiveGridLayout">
                <f:content>
                    <Label text="Decision Summary" />
                    <Text text="Total Entered: {localModel>/totalEntered} / {inspection>LotQuantity}" />
                    <Button id="btnApprove" text="Approve" type="Success" press="onDecision" enabled="{localModel>/canDecide}" visible="{localModel>/isEditable}">
                        <customData>
                            <core:CustomData key="decision" value="A" />
                        </customData>
                    </Button>
                    <Button id="btnReject" text="Reject" type="Reject" press="onDecision" enabled="{localModel>/canDecide}" visible="{localModel>/isEditable}">
                        <customData>
                            <core:CustomData key="decision" value="R" />
                        </customData>
                    </Button>
                </f:content>
            </f:SimpleForm>
        </content>
    </Page>
</mvc:View>
